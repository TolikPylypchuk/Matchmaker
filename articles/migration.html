<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
      <title>Migration Guide | Matchmaker </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Migration Guide | Matchmaker ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/TolikPylypchuk/Matchmaker/blob/main/docs/articles/migration.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="Matchmaker">
            Matchmaker
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="migration-guide">Migration Guide</h1>

<p>This article describes how to migrate to version 2.0.0 from
<a href="https://github.com/TolikPylypchuk/PatternMatching">PatternMatching v1.2.0</a>.</p>
<p>If you need to migrate from older versions, first migrate to version 1.2.0. You can do that just by reading the
changelog, because previous versions contained much fewer changes and it's much simpler to migrate.</p>
<p>In order to migrate from version 2.0.0 to version 2.1.0 action is required only if you implemented the
<code>IPattern&lt;TInput, TMatchResult&gt;</code> interface (which wasn't recommended). The less generic <code>IPattern&lt;TInput&gt;</code> interface was
removed, so you should remove its <code>Match</code> method. That's it.</p>
<p>No changes are required to migrate from version 2.1.0 to 3.1.0. Version 3.0.0 removed support for .NET Standard 2.0, but
version 3.1.0 added it back, effectively undoing the only breaking change of 3.0.0.</p>
<h2 id="general">General</h2>
<p>Since this library has a new name, the namespace is different as well. Instead of the <code>PatternMatching</code> namespace there
are three namespaces: <code>Matchmaker</code>, <code>Matchmaker.Patterns</code> and <code>Matchmaker.Linq</code>.</p>
<p>The dependency on <a href="https://github.com/louthy/language-ext">language-ext</a> was dropped. Instead of using <code>OptionUnsafe</code>
this library now uses its own <code>MatchResult</code>.</p>
<h2 id="patterns">Patterns</h2>
<p>The predefined patterns haven't changed much, but the way to create custom patterns changed drastically.</p>
<p>The <code>Match</code> method in <code>IPattern&lt;TInput, TMatchResult&gt;</code> now returns <code>MatchResult&lt;TMatchResult&gt;</code> instead of
<code>OptionUnsafe&lt;TMatchResult&gt;</code>.</p>
<p>The <code>IPattern&lt;TInput, TMatchResult&gt;</code> now contains the <code>Description</code> property. If you implemented this interface, you
must add it and make it return an empty string if you don't want a description.</p>
<p><code>IPattern&lt;TInput, TMatchResult&gt;</code> now extends <code>IPattern&lt;TInput&gt;</code>. If you implemented this interface, it's better
to extend the new <code>Pattern&lt;TInput, TMatchResult&gt;</code> class instead, as it provides both an implementation of the less
generic interface, and the <code>Description</code> property. Bear in mind that <code>IPattern&lt;TInput&gt;</code> was removed in version
2.1.0 so don't bother with it much.</p>
<p>The <code>ConditionalPattern&lt;TInput, TMatchResult, TPattern&gt;</code> is gone. It's too much work for the users to implement
filtering of patterns if they want a highly customized pattern. If you filtered pattern results with the <code>When</code> method
before, now you can do that using the <code>Where</code> extension method from the <code>Matchmaker.Linq</code> namespace, which works on all
patterns, and doesn't need a special base class. I renamed this method because previously I wanted it to look like the
<code>when</code> clause of the <code>switch</code> expressions, but now this method is part of LINQ to Patterns, so <code>Where</code> is more
appropriate.</p>
<p><code>SimplePattern&lt;TInput&gt;</code> is gone and <code>Pattern&lt;TInput, TMatchResult&gt;</code> now serves as a base class for patterns. If you need
to create a pattern from a function or a predicate, use the <code>CreatePattern</code> methods in the <code>Pattern</code> class.</p>
<p>Since <code>SimplePattern&lt;TInput&gt;</code> is gone, you cannot use operators to compose patterns (<code>&amp;</code>, <code>|</code> and <code>^</code>). Also, the <code>And</code>,
<code>Or</code> and <code>Xor</code> methods are not part of pattern definition - they are extension methods from the <code>Matchmaker.Linq</code>
namespace. The <code>~</code> operator is gone as well. Use <code>Not</code> instead.</p>
<p>The <code>StructNull</code> pattern is gone. It was deprecated in version 1.2.0. The <code>ValueNull</code> pattern provides the same
functionality.</p>
<h2 id="match-expressions">Match Expressions</h2>
<p>The default mode of execution for match statements is now strict. So <code>ExecuteOn</code> is strict. The <code>ExecuteStrict</code> method
is gone and <code>ExecuteNonStrict</code> was added. This was changed because it was unintuitive to have different default modes
in match expressions and match statements.</p>
<p>Matching with fall-through became lazy. This is major change. The result in match expressions is now not an <code>Lst</code> from
language-ext, but a lazy <code>IEnumerable</code> which the user has to enumerate for the match to actually be executed. Match
statements also return an <code>IEnumerable</code> instead of a number of successful cases. If you want to know the number of
successful cases, you can call <code>Count()</code> on the result of the match. Or you can call <code>Enumerate</code> from <code>Matchmaker.Linq</code>
if you just want to execute it. Since matching with fall-though is lazy, it doesn't have modes of execution - it's just
non-strict. The library cannot decide to throw an exception if there are no successful cases because the library doesn't
decide when to execute the expression.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/TolikPylypchuk/Matchmaker/blob/main/docs/articles/migration.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Created by <a href="https://tolik.io">Tolik Pylypchuk</a>. Docs made with <a href="https://dotnet.github.io/docfx">docfx</a></span>.
        </div>
      </div>
    </footer>
  </body>
</html>
