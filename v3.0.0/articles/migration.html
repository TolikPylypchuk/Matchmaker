<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Migration Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Migration Guide ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="migration-guide">Migration Guide</h1>

<p>This article describes how to migrate to version 2.0.0 from
<a href="https://github.com/TolikPylypchuk/PatternMatching">PatternMatching v1.2.0</a>.</p>
<p>If you need to migrate from older versions, first migrate to version 1.2.0. You can do that just by reading the
changelog, because previous versions contained much fewer changes and it's much simpler to migrate.</p>
<p>In order to migrate from version 2.0.0 to version 2.1.0 action is required only if you implemented the
<code>IPattern&lt;TInput, TMatchResult&gt;</code> interface (which wasn't recommended). The less generic <code>IPattern&lt;TInput&gt;</code>
interface was removed, so you should remove its <code>Match</code> method. That's it.</p>
<p>To migrate from version 2.1.0 to 3.0.0, you need a platform which supports .NET Standard 2.1. If it does, then you
can upgrade without any fuss as this version doesn't contain breaking changes.</p>
<h2 id="general">General</h2>
<p>Since this library has a new name, the namespace is different as well. Instead of the <code>PatternMatching</code> namespace
there are three namespaces: <code>Matchmaker</code>, <code>Matchmaker.Patterns</code> and <code>Matchmaker.Linq</code>.</p>
<p>The dependency on <a href="https://github.com/louthy/language-ext">language-ext</a> was dropped. Instead of using <code>OptionUnsafe</code>
this library now uses its own <code>MatchResult</code>.</p>
<h2 id="patterns">Patterns</h2>
<p>The predefined patterns haven't changed much, but the way to create custom patterns changed drastically.</p>
<p>The <code>Match</code> method in <code>IPattern&lt;TInput, TMatchResult&gt;</code> now returns <code>MatchResult&lt;TMatchResult&gt;</code> instead of
<code>OptionUnsafe&lt;TMatchResult&gt;</code>.</p>
<p>The <code>IPattern&lt;TInput, TMatchResult&gt;</code> now contains the <code>Description</code> property. If you implemented this interface,
you must add it and make it return an empty string if you don't want a description.</p>
<p><code>IPattern&lt;TInput, TMatchResult&gt;</code> now extends <code>IPattern&lt;TInput&gt;</code>. If you implemented this interface, it's better
to extend the new <code>Pattern&lt;TInput, TMatchResult&gt;</code> class instead, as it provides both an implementation of the less
generic interface, and the <code>Description</code> property. Bear in mind that <code>IPattern&lt;TInput&gt;</code> was removed in version
2.1.0 so don't bother with it much.</p>
<p>The <code>ConditionalPattern&lt;TInput, TMatchResult, TPattern&gt;</code> is gone. It's too much work for the users to implement
filtering of patterns if they want a highly customized pattern. If you filtered pattern results with the <code>When</code> method
before, now  you can do that using the <code>Where</code> extension method from the <code>Matchmaker.Linq</code> namespace, which works on
all patterns, and doesn't need a special base class. I renamed this method because previously I wanted it to look like
the <code>when</code> clause of the <code>switch</code> expressions, but now this method is part of LINQ to Patterns, so <code>Where</code> is more
appropriate.</p>
<p><code>SimplePattern&lt;TInput&gt;</code> is gone and <code>Pattern&lt;TInput, TMatchResult&gt;</code> now serves as a base class for patterns.
If you need to create a pattern from a function or a predicate, use the <code>CreatePattern</code> methods in the <code>Pattern</code>
class.</p>
<p>Since <code>SimplePattern&lt;TInput&gt;</code> is gone, you cannot use operators to compose patterns (<code>&amp;</code>, <code>|</code> and <code>^</code>). Also,
the <code>And</code>, <code>Or</code> and <code>Xor</code> methods are not part of pattern definition - they are extension methods from the
<code>Matchmaker.Linq</code> namespace. The <code>~</code> operator is gone as well. Use <code>Not</code> instead.</p>
<p>The <code>StructNull</code> pattern is gone. It was deprecated in version 1.2.0. The <code>ValueNull</code> pattern provides the same
functionality.</p>
<h2 id="match-expressions">Match Expressions</h2>
<p>The default mode of execution for match statements is now strict. So <code>ExecuteOn</code> is strict. The <code>ExecuteStrict</code>
method is gone and <code>ExecuteNonStrict</code> is added. This was changed because it was weird to have different default modes
in match expressions and match statements.</p>
<p>Matching with fall-through became lazy. This is major change. The result in match expressions is now not the <code>Lst</code>
from language-ext, but a lazy <code>IEnumerable</code> which the user has to enumerate for the match to actually be executed.
Match statements also return an <code>IEnumerable</code> instead of a number of successful cases. If you want to know the number
of successful cases, you can call <code>Count()</code> on the result of the match. Or you can call <code>Enumerate</code> from
<code>Matchmaker.Linq</code> if you just want to execute it. Since matching with fall-though is lazy, it doesn't have modes
of execution - it's just non-strict. The library cannot decide to throw an exception if there are no successful cases
because the library doesn't decide when to execute the expression.</p>
<p>Next article: <a href="why.html">Why this library was written</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TolikPylypchuk/Matchmaker/blob/master/docs/articles/migration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <div>Copyright (c) 2018-2021 Anatoliy Pylypchuk</div><span>Generated by <strong>DocFx</strong>.</span> <span>Icons made by <a href="https" ://www.flaticon.com/authors/roundicons"="" title="Roundicons">Roundicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
